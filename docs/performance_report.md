# ISAC-CRAN系统性能测试报告

**测试日期**: 2026-02-23  
**测试环境**: Docker Compose (Windows)  
**测试工具**: Go Benchmark Tool

---

## 1. 测试环境

| 项目 | 配置 |
|------|------|
| 操作系统 | Windows |
| 容器平台 | Docker Desktop |
| Go版本 | 1.24.13 |
| CPU核心 | 6核 |
| 并发数 | 10 |
| 总请求数 | 1000/接口 |

---

## 2. 测试结果

### 2.1 健康检查接口 `/api/v1/health`

| 指标 | 数值 |
|------|------|
| 总请求数 | 1000 |
| 成功请求 | 1000 |
| 失败请求 | 0 |
| 成功率 | 100% |
| QPS | **302.08** |
| P50延迟 | 27.03ms |
| P90延迟 | 50.14ms |
| P99延迟 | 84.15ms |

### 2.2 系统信息接口 `/api/v1/info`

| 指标 | 数值 |
|------|------|
| 总请求数 | 1000 |
| 成功请求 | 1000 |
| 失败请求 | 0 |
| 成功率 | 100% |
| QPS | **296.10** |
| P50延迟 | 27.87ms |
| P90延迟 | 51.82ms |
| P99延迟 | 87.12ms |

### 2.3 IRS状态接口 `/api/v1/irs/status`

| 指标 | 数值 |
|------|------|
| 总请求数 | 1000 |
| 成功请求 | 1000 |
| 失败请求 | 0 |
| 成功率 | 100% |
| QPS | **283.67** |
| P50延迟 | 28.26ms |
| P90延迟 | 53.30ms |
| P99延迟 | 99.96ms |

### 2.4 传感器列表接口 `/api/v1/sensor/list`

| 指标 | 数值 |
|------|------|
| 总请求数 | 1000 |
| 成功请求 | 1000 |
| 失败请求 | 0 |
| 成功率 | 100% |
| QPS | **301.86** |
| P50延迟 | 28.06ms |
| P90延迟 | 48.50ms |
| P99延迟 | 78.34ms |

### 2.5 运行时指标接口 `/debug/metrics`

| 指标 | 数值 |
|------|------|
| 总请求数 | 1000 |
| 成功请求 | 100 |
| 失败请求 | 900 |
| 成功率 | 10% |
| QPS | **31.04** |
| P50延迟 | 30.57ms |
| P90延迟 | 48.79ms |

> ⚠️ 注意: `/debug/metrics` 接口存在超时问题，需要排查

---

## 3. 性能分析

### 3.1 性能对比图

```
QPS对比:
Health Check  ████████████████████████████████ 302.08
System Info   ███████████████████████████████▌ 296.10
IRS Status    ██████████████████████████████   283.67
Sensor List   ████████████████████████████████ 301.86
Runtime Metrics ████████                          31.04
              0        100       200       300       400
```

### 3.2 延迟分布

```
P99延迟对比:
Health Check  ████████████████████████████████ 84.15ms
System Info   █████████████████████████████████ 87.12ms
IRS Status    ██████████████████████████████████ 99.96ms
Sensor List   ████████████████████████████████ 78.34ms
              0        25        50        75       100
```

### 3.3 性能评级

| 接口 | QPS评级 | 延迟评级 | 综合评级 |
|------|---------|----------|----------|
| Health Check | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | **优秀** |
| System Info | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | **优秀** |
| IRS Status | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | **良好** |
| Sensor List | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | **优秀** |
| Runtime Metrics | ⭐⭐ | ⭐⭐⭐ | **需优化** |

---

## 4. 问题与建议

### 4.1 发现的问题

1. **Runtime Metrics接口超时**
   - 现象: 900/1000请求失败
   - 可能原因: runtime.ReadMemStats()调用阻塞
   - 建议: 异步采集指标，避免阻塞HTTP请求

### 4.2 优化建议

| 优化项 | 当前状态 | 建议方案 | 预期收益 |
|--------|----------|----------|----------|
| Metrics采集 | 同步阻塞 | 异步定时采集 | 消除超时 |
| 连接池 | 默认配置 | 增加连接池大小 | 提升QPS 20% |
| 响应压缩 | 未启用 | 启用Gzip | 减少传输量 50% |

---

## 5. 结论

### 5.1 总体评价

ISAC-CRAN系统在Docker Compose环境下表现良好：

- ✅ **核心API性能优秀**: QPS达到280-300，满足生产需求
- ✅ **延迟表现良好**: P99延迟控制在100ms以内
- ✅ **稳定性高**: 核心接口成功率100%
- ⚠️ **监控接口需优化**: Runtime Metrics存在超时问题

### 5.2 性能指标汇总

| 指标 | 数值 | 评级 |
|------|------|------|
| 平均QPS | 296 | 优秀 |
| 平均P50延迟 | 27.8ms | 优秀 |
| 平均P99延迟 | 87.4ms | 良好 |
| 平均成功率 | 100% | 优秀 |

### 5.3 生产部署建议

1. **资源配置**: 建议2核CPU + 512MB内存起步
2. **扩容策略**: 当QPS > 500时，考虑水平扩展
3. **监控告警**: P99延迟 > 200ms时触发告警

---

**报告生成时间**: 2026-02-23  
**测试执行**: ISAC-CRAN Benchmark Tool
